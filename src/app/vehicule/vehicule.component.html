<!-- Vehicle page html -->

<div class="page-container">
    <div class="mainContainer">
        <h2 class="itinerary-section-heading">Véhicules de {{companyName}}</h2>

        <!-- Left Container -->
        <div class="left-right-container">
            <div class="left-container">
                <div class="vehicleListContainer">
                    <!-- Default message -->
                    <div class="vehicle-loading-spinner" *ngIf="loading">
                        <app-loading-spinner></app-loading-spinner>
                    </div>
                    <div *ngIf="!allVehicles.length && isManager && !loading" class="default-message">Aucun véhicule
                        enregistré dans
                        votre
                        entreprise.</div>
                    <div *ngIf="!allVehicles.length && !isManager && !loading" class="default-message">Aucun véhicule ne
                        vous est
                        assigné.</div>

                    <div *ngIf="allVehicles.length !== 0" ngClass="container-tab-userList">
                        <div *ngFor="let vehicle of allVehicles" ngClass="new-vehicle-container-tab-userList">
                            <div ngClass="new-vehicle-content-tab-userList">
                                <div ngClass="new-picture-container-tab-userList">
                                    <div *ngIf="allVehiclesLocked.includes(vehicle.vehicle_id)"
                                        ngClass="new-lock-tab-userList">
                                        <mat-icon>lock</mat-icon>
                                    </div>
                                    <img ngClass=" new-picture-tab-userList" src="../../assets/interrogation.png"
                                        alt="vehicule">
                                </div>
                                <div ngClass="new-infos-container-tab-userList">
                                    <p ngClass="new-vehicule-model-tab-userList">{{vehicle.brand}} -
                                        {{vehicle.model}}
                                    </p>
                                    <div ngClass="new-vehicule-status-tab-userList">
                                        <div class="new-vehicule-status-icon-tab-userList"
                                            [ngClass]="{'repair': vehicle.status == this.vehiclesStatus[1], 'unavailable': vehicle.status == this.vehiclesStatus[2]}">
                                            <mat-icon>circle</mat-icon>
                                        </div>
                                        <p ngClass="new-vehicule-status-text-tab-userList">{{ setStatus(vehicle.status)
                                            || 'Inconnu'
                                            }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <table ngClass="tab-userList" mat-table [dataSource]="allVehicles">
                            <ng-container class="content-tab-userList" matColumnDef="name">
                                <th ngClass="header-tab-userList" mat-header-cell *matHeaderCellDef>Nom</th>
                                <td ngClass="data-tab-userList" mat-cell *matCellDef="let data"> {{data.name}}
                                </td>
                            </ng-container>
                            <ng-container class="content-tab-userList" matColumnDef="brand">
                                <th ngClass="header-tab-userList" mat-header-cell *matHeaderCellDef>Marque</th>
                                <td ngClass="data-tab-userList" mat-cell *matCellDef="let data"> {{data.brand}}
                                </td>
                            </ng-container>
                            <ng-container class="content-tab-userList" matColumnDef="model">
                                <th ngClass="header-tab-userList" mat-header-cell *matHeaderCellDef>Model</th>
                                <td ngClass="data-tab-userList" mat-cell *matCellDef="let data"> {{data.model}}
                                </td>
                            </ng-container>
                            <ng-container class="content-tab-userList" matColumnDef="license">
                                <th ngClass="header-tab-userList" mat-header-cell *matHeaderCellDef>Plaque
                                    d'immatriculation</th>
                                <td ngClass="data-tab-userList" mat-cell *matCellDef="let data"> {{data.license}}
                                </td>
                            </ng-container>
                            <ng-container class="content-tab-userList" matColumnDef="mileage">
                                <th ngClass="header-tab-userList" mat-header-cell *matHeaderCellDef>Kilométrage</th>
                                <td ngClass="data-tab-userList" mat-cell *matCellDef="let data"> {{data.mileage}}
                                </td>
                            </ng-container>
                            <ng-container class="content-tab-userList" matColumnDef="action">
                                <th ngClass="header-tab-userList" mat-header-cell *matHeaderCellDef> Action </th>
                                <td class="data-tab-userList" mat-cell *matCellDef="let vehicle">
                                    <div class="company-container">
                                        <button class="button-data-tab-userList" (click)="addExpense(vehicle)">
                                            <mat-icon>attach_money</mat-icon>
                                        </button>
                                        <button class="button-data-tab-userList" (click)="editVehicle(vehicle)"
                                            *ngIf="isManager">
                                            <mat-icon>settings</mat-icon>
                                        </button>
                                        <button class="button-data-tab-userList" (click)="deleteVehicle(vehicle)"
                                            *ngIf="isManager">
                                            <mat-icon>delete</mat-icon>
                                        </button>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="buttonContainer" *ngIf="isManager">
            <button class="buttonADD" mat-fab extended (click)="addVehicle()">
                Ajouter un véhicule
                <mat-icon>playlist_add</mat-icon>
            </button>
        </div>
    </div>
</div>